function Drag(a,u,i){this.options={setCursor:true,setPosition:true,direction:{x:true,y:true},limit:{x:null,y:null},onDrag:null,onDragStart:null,onDragEnd:null};var b=this.options;for(opt in i){if(b.hasOwnProperty(opt)){b[opt]=i[opt]}}var g,d,k,t;var l=this;var m=navigator.appName==="Microsoft Internet Explorer";this.element=u||a;this.X;this.Y;this.move=function(v,D){var z=this.element.style;var B=b.direction;var w=b.limit;if(B.x){if(w.x!==null){var A=v>w.x[0],C=v+t<=w.x[1]}else{var A=C=1}l.X=v;z.left=A&&C?v+"px":(!A?0:(w.x[1]-t)+"px")}if(B.y){if(w.y!==null){var A=D>w.y[0],C=D+k<=w.y[1]}else{var A=C=1}l.Y=D;z.top=A&&C?D+"px":(!A?0:(w.y[1]-k)+"px")}};var p=function(){var w=l.element;if(!w){throw new Error("Invalid element passed to draggable: "+w)}var v=c(w);k=h(v.height);t=h(v.width);if(b.setPosition){var x=w.style;x.left=w.offsetLeft+"px";x.top=w.offsetTop+"px";x.right="auto";x.bottom="auto";x.position="absolute"}if(b.setCursor){x.cursor="move"}o(w,"mousedown",e)};var e=function(y){var y=y||event;s(y);var w=l.element;w.oldZindex=w.style.zIndex;w.style.zIndex=10000;var v=j(w);g=(l.X=v.x)-y.clientX;d=(l.Y=v.y)-y.clientY;var x=document;o(x,"selectstart",s);o(x,"mousemove",r);o(x,"mouseup",n);if(f=b.onDragStart){f(w,l.X,l.Y,y)}};var r=function(w){var w=w||event;var v=w.clientX+g;var z=w.clientY+d;l.move(v,z);if(f=b.onDrag){f(l.element,v,z,w)}};var n=function(w){var w=w||event;var v=document;q(v,"mousemove",r);q(v,"mouseup",n);q(v,"selectstart",s);l.element.style.zIndex=l.element.oldZindex;if(f=b.onDragEnd){f(l.element,l.X,l.Y,w)}};var j=function(w){var y=0;var x=0;var v=w;do{y+=v.offsetTop;x+=v.offsetLeft}while(v=v.offsetParent&&!c(v.parentNode).position);if(style=c(w)){x-=(h(style.marginLeft)||0)-(h(style.borderLeftWidth)||0);y-=(h(style.marginTop)||0)-(h(style.borderTopWidth)||0)}return{x:x,y:y}};function o(v,x,w){return m?v.attachEvent("on"+x,w):v.addEventListener(x,w,false)}function q(v,x,w){return m?v.detachEvent("on"+x,w):v.removeEventListener(x,w,false)}function c(v){return m?v.currentStyle:getComputedStyle(v)}var h=function(v){return parseInt(v,10)};var s=function(v){m?v.returnValue=false:v.preventDefault()};p()};